<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario AutomÃ¡tico</title>
    <link rel="stylesheet" href="calendar.css">
</head>
<body>
    <div class="calendar-container">
        <!-- Header compacto -->
        <div class="calendar-header">
            <h2 id="year-month">Cargando...</h2>
            <div class="controls">
                <button id="pause-btn">Pausar</button>
                <button id="reset-btn">Reiniciar</button>
            </div>
        </div>
        
        <!-- Calendario horizontal de una semana -->
        <div class="week-calendar">
            <div class="week-container">
                <div id="week-days">
                    <!-- Los 7 dÃ­as de la semana se generan dinÃ¡micamente -->
                </div>
            </div>
        </div>
        
        <!-- InformaciÃ³n del estado -->
        <div class="status">
            <div class="status-info">
                <p>ðŸ“… <span id="current-date-full">Cargando fecha completa...</span></p>
                <p>âš½ Club seleccionado: <span id="selected-club">Cargando...</span></p>
                <p>ðŸŽ® Los eventos se muestran en la consola (F12)</p>
            </div>
        </div>
    </div>

    <!-- Audio elements (hidden) -->
    <audio id="bg-audio" loop autoplay></audio>
    <audio id="button-audio"></audio>

    <!-- Scripts de datos estÃ¡ticos -->
    <script src="../data/nombres.js"></script>
    <script src="../data/clubes.js"></script>
    <script src="../data/lesiones.js"></script>
    <script src="../data/cansancio.js"></script>
    <script src="../data/actitudes.js"></script>

    <!-- Scripts de mÃ³dulos -->
    <script src="modules/retiro.js"></script>
    <script src="modules/lesiones-manager.js"></script>

    <!-- Script principal del calendario -->
    <script src="calendar.js"></script>
    
    <script>
        // URLs de audio hardcodeadas
        const AUDIO_CONFIG = {
            backgroundMusic: "https://drive.google.com/uc?export=download&id=1XZ4HgV-OV4GvnLqocoKYm1_YhwJmgoyw",
            buttonSound: "URL_SONIDO_BOTON_AQUI"
        };
        
        // Mostrar club seleccionado y configurar audio
        document.addEventListener('DOMContentLoaded', () => {
            const clubSeleccionado = localStorage.getItem("selectedClub");
            const clubElement = document.getElementById('selected-club');
            if (clubSeleccionado && clubElement) {
                clubElement.textContent = clubSeleccionado;
            } else if (clubElement) {
                clubElement.textContent = 'No seleccionado';
            }
            
            // Inicializar audio automÃ¡ticamente
            initializeAudio();
        });
        
        function initializeAudio() {
            const bgAudio = document.getElementById('bg-audio');
            const buttonAudio = document.getElementById('button-audio');
            
            // Configurar mÃºsica de fondo
            bgAudio.src = AUDIO_CONFIG.backgroundMusic;
            bgAudio.volume = 0.3;
            
            // Configurar sonido de botones
            buttonAudio.src = AUDIO_CONFIG.buttonSound;
            buttonAudio.volume = 0.5;
            
            // Intentar reproducir mÃºsica de fondo automÃ¡ticamente
            bgAudio.play().catch(e => {
                console.log('Autoplay bloqueado. Haz clic en cualquier lugar para activar audio.');
                // Activar audio en el primer clic del usuario
                document.addEventListener('click', () => {
                    bgAudio.play().catch(e => console.log('Error reproduciendo mÃºsica:', e));
                }, { once: true });
            });
            
            // Agregar sonido a todos los botones
            document.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', playButtonSound);
            });
        }
        
        function playButtonSound() {
            const buttonAudio = document.getElementById('button-audio');
            buttonAudio.currentTime = 0; // Reiniciar desde el inicio
            buttonAudio.play().catch(e => console.log('Error reproduciendo sonido:', e));
        }
    </script>
</body>
</html>
